!function(a,b){"function"==typeof define&&define.amd?define(["angular","vega"],b):b(a.angular,a.vg)}(this,function(a,b){function c(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};return clearTimeout(c),c=setTimeout(f,b),d}}return a.module("ngVega",[]).directive("vega",function(){return{restrict:"AE",scope:{spec:"=",data:"=vegaData",renderer:"=vegaRenderer"},link:function(a,d,e){function f(){b.parse.spec(a.spec,function(b){g=b({el:d[0],data:a.data,renderer:a.renderer||"svg"}).update()})}var g,h=c(f,100);a.$watch("spec",h,!0),a.$watch("data",function(a){g?g.data(a).update().render():h()},!0),a.$watch("renderer",function(a){g?g.renderer(a).update():h()})}}})});